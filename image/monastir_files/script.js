var isSafari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString();1==isSafari&&$(window).bind("pageshow",function(a){a.originalEvent.persisted&&window.location.reload()});var isMobile=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0);var ua=navigator.userAgent.toLowerCase(),isAndroid=ua.indexOf("android")>-1,iOS=/(iPhone|iPod)/.test(navigator.userAgent);function number_format(a,i,t,e){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+a)?+a:0,n=isFinite(+i)?Math.abs(i):0,r=void 0===e?",":e,c=void 0===t?".":t,l="";return(l=(n?function(a,i){var t=Math.pow(10,i);return""+Math.round(a*t)/t}(o,n):""+Math.round(o)).split("."))[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(l[1]||"").length<n&&(l[1]=l[1]||"",l[1]+=new Array(n-l[1].length+1).join("0")),l.join(c)}function loadScriptMapDettaglio(){var a="it";$("#lang").length>0&&(a=$("#lang").val()),$.getScript("https://maps.googleapis.com/maps/api/js?v=3.25&signed_in=false&libraries=places&language="+a+"&key="+API_KEY,function(){var a=$("a[href='#Mappa']").attr("data-src2");$.getScript(a,function(){var a={zoom:15,zoomCtrl:!0,positionPanel:google.maps.ControlPosition.LEFT_TOP,scrollMap:!1,disableDbClickZoom:!0,dragMap:!0},i=new $.MapsClass("schedaMappa"),t=$("#schedaMappa").attr("indirizzo"),e=$("#schedaMappa").attr("lat"),o=$("#schedaMappa").attr("lng");google.maps.event.addDomListener(window,"load",i.CreateSimpleMap(e,o,t,a))})})}function printImmobile(){$("li.planimetrie").length?($("li.planimetrie a").tab("show"),setTimeout(function(){$("li.foto a").tab("show"),window.print()},500)):window.print()}if(isMobile&&(isAndroid||iOS)&&void 0==$.cookie("scaricaAppClose")&&"it"==nazione&&(isAndroid?$("#textMobile").text(aLang.scaricaGratisAndroid):iOS&&$("#textMobile").text(aLang.scaricaGratisIphone),$("#modalScaricaApp").css("display","block")),$("#modalScaricaApp").on("click","#scaricaApp",function(){if(iOS){var a=$(this).attr("linkapple");window.open(a)}else{a=$(this).attr("linkandroid");window.open(a)}var i=new Date;i.setTime(i.getTime()+108e5),$.cookie("scaricaAppClose",1,{path:"/",expires:i}),$("#modalScaricaApp").css("display","none")}),$("#modalScaricaApp").on("click","#closeScaricaApp",function(){var a=new Date;a.setTime(a.getTime()+108e5),$.cookie("scaricaAppClose",1,{path:"/",expires:a}),$("#modalScaricaApp").css("display","none")}),function(a){a.each(["show","hide"],function(i,t){var e=a.fn[t];a.fn[t]=function(){return this.trigger(t),e.apply(this,arguments)}})}(jQuery),$("#mapIndirizzo").length>0){var pac_input=document.getElementById("fc_indirizzo");!function(a){var i=a.addEventListener?a.addEventListener:a.attachEvent;function t(t,e){if("keydown"==t){var o=e;e=function(i){var t=$(".pac-item-selected").length>0;if(13==i.which&&!t){var e=$.Event("keydown",{keyCode:40,which:40});o.apply(a,[e])}o.apply(a,[i])}}i.apply(a,[t,e])}a.addEventListener?a.addEventListener=t:a.attachEvent&&(a.attachEvent=t)}(pac_input)}function loadScriptMapValutazione(a,i){var t="it";$("input[name=lang]").length>0&&(t=$("input[name=lang]").val()),$.getScript("https://maps.googleapis.com/maps/api/js?v=3.25&signed_in=false&libraries=places&language="+t+"&key="+i,function(){var i=a+"MapsClass.js";$.getScript(i,function(){if(document.addEventListener){var a=new google.maps.places.Autocomplete(pac_input,{types:["geocode"],componentRestrictions:{country:aLang.country}});$("#mapIndirizzo").length>0&&google.maps.event.addListener(a,"place_changed",function(){var i=a.getPlace();if(void 0!=i.geometry&&($("#mapIndirizzo").attr("lat",i.geometry.location.lat()),$("#mapIndirizzo").attr("lng",i.geometry.location.lng()),setTimeout(function(){var a={zoom:15,zoomCtrl:!0,positionPanel:google.maps.ControlPosition.LEFT_TOP,scrollMap:!1,disableDbClickZoom:!0,dragMap:!0},i=new $.MapsClass("mapIndirizzo");$("#mapIndirizzo").css("height","400px");var t=$("#mapIndirizzo").attr("lat"),e=$("#mapIndirizzo").attr("lng"),o=$("input[name=settore]:checked").val(),n=$("#mapIndirizzo").attr("dataRete"),r=$("#mapIndirizzo").attr("dataNaz"),c=$("#fc_indirizzo").val();if(google.maps.event.addDomListener(window,"load",i.CreateSimpleMap(t,e,c,a)),""!=e&&""!=t){var l="longitudine="+e+"&latitudine="+t+"&rete="+n+"&settore="+o+"&indirizzo="+c+"&nazione="+r;$.ajax({type:"POST",url:"/ajax/getAgenzieValutazione",data:l,cache:!1,success:function(a){$("#contAgenziaValutazione").html(a)}})}},900),void 0!=$("#idAgenzia").val())){var t=$("input[name=settore]:checked").val(),e=$("#mapIndirizzo").attr("dataRete"),o=$("#mapIndirizzo").attr("dataNaz"),n=$("#fc_indirizzo").val(),r="longitudine="+i.geometry.location.lng()+"&latitudine="+i.geometry.location.lat()+"&rete="+e+"&settore="+t+"&indirizzo="+n+"&nazione="+o;$.ajax({type:"POST",url:"/ajax/getAgenzieValutazione",data:r,cache:!1,success:function(a){$("#contAgenziaValutazione").html(a)}})}})}else{document.getElementById("fc_indirizzo"),a=new google.maps.places.Autocomplete(pac_input,{types:["geocode"],componentRestrictions:{country:aLang.country}});$("#mapIndirizzo").length>0&&google.maps.event.attachEvent(a,"place_changed",function(){var i=a.getPlace();if("undefined"!=i.geometry&&($("#mapIndirizzo").attr("lat",i.geometry.location.lat()),$("#mapIndirizzo").attr("lng",i.geometry.location.lng()),void 0!=$("#idAgenzia").val())){var t=$("input[name=settore]:checked").val(),e=$("#mapIndirizzo").attr("dataRete"),o=$("#mapIndirizzo").attr("dataNaz"),n=$("#fc_indirizzo").val(),r="longitudine="+i.geometry.location.lng()+"&latitudine="+i.geometry.location.lat()+"&rete="+e+"&settore="+t+"&indirizzo="+n+"&nazione="+o;$.ajax({type:"POST",url:"/ajax/getAgenzieValutazione",data:r,cache:!1,success:function(a){$("#contAgenziaValutazione").html(a)}})}})}})})}function validatorExt(a){jQuery.validator.addMethod("isMailOrTel",function(i,t){var e=$(a+" input[name=email]").val().trim(),o="";$(a+" input[name=telefono]").length>0&&(o=$(a+" input[name=telefono]").val());var n=[];if(""!=o&&void 0!=o&&""!=e&&void 0!=e){var r=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:[a-zA-Z0-9](?:\.[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]{2,6}))$/i;e.match(r)?n.push(1):n.push(0)}else if(""!=o&&void 0!=o)n.push(1);else if(""!=e&&void 0!=e){r=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:[a-zA-Z0-9](?:\.[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]{2,6}))$/i;e.match(r)?n.push(1):n.push(3)}else n.push(0);return-1!=$.inArray(1,n)},aLang.ismailortel),jQuery.validator.addMethod("isNomeOCognome",function(i,t){var e=$(a+" #fc_nome").val(),o=$(a+" #fc_cognome").val(),n=[];return""!=e&&void 0!=e?n.push(1):n.push(0),""!=o&&void 0!=o?n.push(1):n.push(0),-1!=$.inArray(1,n)},aLang.isnomeocognome),$.validator.addMethod("contieneLettereENumeri",function(a,i){return this.optional(i)||a.match(/[a-zA-Z]/)&&a.match(/[0-9]/)},aLang.validaLettereENumeri)}function validateForm(a){validatorExt(a),$(a).validate({ignore:[],focusInvalid:!1,errorPlacement:function(i,t){return t.attr("name")&&("email"==t.attr("name")&&i.insertAfter("#email"),"motivazione"==t.attr("name")?$(a+" input[name="+t.attr("name")+"]").parent().parent().attr("style","color:red"):"tipologia"==t.attr("name")?($(a+" label[for="+t.attr("id")+"]").attr("style","color:red"),$(a+" select[name="+t.attr("name")+"]").parent().find("button").attr("style","border: 1px solid red;")):"idAgenzia"==t.attr("name")?$("#errorAgenzia").show():$(a+" label[for="+t.attr("id")+"]").attr("style","color:red")),!0},rules:{cognome:{required:!0},email:{isMailOrTel:!0},nomeDest:{required:!0},nomeMittente:{required:!0},emailDest:{required:!0,email:!0},emailMittente:{required:!0,email:!0},telefono:{isMailOrTel:!0,numberTelefono:!0},caricaCV:{required:!0},indirizzo:{required:!0},tipologia:{required:!0,nonZero:!0},motivazione:{required:!0},idAgenzia:{required:!0},privacy_imm:{required:!0}},messages:{email:{verifyemail:aLang.verifyemail}}}),$(a).on("focusout",".bootstrap-select",function(){"border: 1px solid red;"==$(this).parent().find("button").attr("style")&&$(this).find("select").valid()&&($(this).parent().find("button").css("border","1px solid #ccc"),$(this).parent().find("button").parent().parent().parent().find("label").css("color","#5a5a5c"))}),$(a).on("change","input",function(){var i=$(this).attr("id");"fc_telefono"==i||"fc_email"==i?$(this).valid()&&($(a+" #fc_telefono").removeClass("error"),$(a+" #fc_email").removeClass("error")):"labelfc_motivazioneVendita"==i||"labelfc_motivazioneAffitto"==i?$(this).valid()?$(this).parent().parent().removeAttr("style"):$(this).parent().parent().attr("style","color:red"):"color:red"==$(a+" label[for="+i+"]").attr("style")?$(this).valid()?($(this).css("border","1px solid #ccc"),$(this).parent().parent().find("label").css("color","#5a5a5c"),$(a+" #email-error").length>0&&$(a+" #email-error").remove()):($(this).css("border","2px solid red"),$(this).parent().parent().find("label").css("color","red")):"idAgenzia"==$(this).attr("name")&&$(this).valid()&&$("#errorAgenzia").hide()})}function validateFormProfilo(a){validatorExt(a),$(a).validate({ignore:[],focusInvalid:!0,rules:{password:{minlength:8,contieneLettereENumeri:!0},VerificaPassword:{equalTo:"#password"}}})}function sliderInput(a){if(void 0!=$(".tab-pane.row.active "+a).attr("name")){var i=Math.round($(a).attr("data-min")),t=Math.round($(a).attr("data-max"));$(a).attr("data-step");if($(".tab-pane.row.active "+a).slider({range:!1,from:i,to:t,step:10,skin:"round_plastic"}),""!=$(".tab-pane.row.active "+a).attr("data-session")&&void 0!=$(a).attr("data-session")){var e=$(".tab-pane.row.active "+a).attr("data-session").split(";"),o=Math.round(e[0]),n=Math.round(e[1]);$(".tab-pane.row.active "+a).slider("value",o,n)}}}function validateFormLavoraConNoi(a){validatorExt(a),$(a).validate({ignore:[],focusInvalid:!1,errorPlacement:function(a,i){return i.attr("name")&&("email"==i.attr("name")&&a.insertAfter("#email"),"motivazione"==i.attr("name")?$("input[name="+i.attr("name")+"]").parent().parent().attr("style","color:red"):"tipologia"==i.attr("name")?($("label[for="+i.attr("id")+"]").attr("style","color:red"),$("select[name="+i.attr("name")+"]").parent().find("button").attr("style","border: 1px solid red;")):"provinciaLav"==i.attr("name")?$("select[name="+i.attr("name")+"]").parent().find("button").attr("style","border: 1px solid red;"):$("label[for="+i.attr("id")+"]").attr("style","color:red")),!0},rules:{nome:{isNomeOCognome:!0},cognome:{isNomeOCognome:!0},email:{required:!0},telefono:{required:!0,numberTelefono:!0},caricaCV:{required:!0},tipologia:{required:!0},motivazione:{required:!0},provinciaLav:{required:!0},privacy_imm:{required:!0}},messages:{email:{verifyemail:aLang.verifyemail}}}),$(a).on("focusout",".bootstrap-select",function(){"border: 1px solid red;"==$(this).parent().find("button").attr("style")&&$(this).find("select").valid()&&($(this).parent().find("button").css("border","1px solid #ccc"),$(this).parent().find("button").parent().parent().parent().find("label").css("color","#5a5a5c"))}),$(a).on("change","input",function(){var i=$(this).attr("id");"fc_nome"==i||"fc_cognome"==i?$(this).valid()&&($("#fc_nome").removeClass("error"),$("#fc_cognome").removeClass("error")):"fc_telefono"!=i&&"fc_email"!=i||$(this).valid()&&($("#fc_telefono").removeClass("error"),$("#fc_email").removeClass("error")),"labelfc_motivazioneVendita"==i||"labelfc_motivazioneAffitto"==i?$(this).valid()?$(this).parent().parent().removeAttr("style"):$(this).parent().parent().attr("style","color:red"):"color:red"==$("label[for="+i+"]").attr("style")&&($(this).valid()?($(this).css("border","1px solid #ccc"),$(this).parent().parent().find("label").css("color","#5a5a5c"),$(a+" #email-error").length>0&&$(a+" #email-error").remove()):($(this).css("border","2px solid red"),$(this).parent().parent().find("label").css("color","red")))})}function validateFormCercoCasa(a){validatorExt(a),$(a).validate({ignore:[],focusInvalid:!1,errorPlacement:function(a,i){return i.attr("name")&&("email"==i.attr("name")&&a.insertAfter("#email"),"motivazione"==i.attr("name")?$("input[name="+i.attr("name")+"]").parent().parent().attr("style","color:red"):"privacy"==i.attr("name")?$("input[name="+i.attr("name")+"]").parent().parent().attr("style","color:red"):$("label[for="+i.attr("id")+"]").attr("style","color:red")),!0},rules:{nome:{required:!0},cognome:{required:!0},email:{isMailOrTel:!0},telefono:{isMailOrTel:!0,numberTelefono:!0},caricaCV:{required:!0},motivazione:{required:!0},privacy:{required:!0}},messages:{email:{verifyemail:aLang.verifyemail}}}),$(a).on("focusout",".bootstrap-select",function(){"border: 1px solid red;"==$(this).parent().find("button").attr("style")&&$(this).find("select").valid()&&($(this).parent().find("button").css("border","1px solid #ccc"),$(this).parent().find("button").parent().parent().parent().find("label").css("color","#5a5a5c"))}),$(a).on("change","input",function(){var i=$(this).attr("id");"fc_telefono"==i||"fc_email"==i?$(this).valid()&&($("#fc_telefono").removeClass("error"),$("#fc_email").removeClass("error")):"labelfc_motivazioneVendita"==i||"labelfc_motivazioneAffitto"==i?$(this).valid()?$(this).parent().parent().removeAttr("style"):$(this).parent().parent().attr("style","color:red"):"labelfc_acconsento"==i||"labelfc_noacconsento"==i?$(this).valid()?$(this).parent().parent().removeAttr("style"):$(this).parent().parent().attr("style","color:red"):"color:red"==$("label[for="+i+"]").attr("style")&&($(this).valid()?($(this).css("border","1px solid #ccc"),$(this).parent().parent().find("label").css("color","#5a5a5c"),$(a+" #email-error").length>0&&$(a+" #email-error").remove()):($(this).css("border","2px solid red"),$(this).parent().parent().find("label").css("color","red")))})}function validateFormRichiestaConsulenza(a){$(a).validate({ignore:[],focusInvalid:!1,errorPlacement:function(a,i){return i.attr("name")&&$("label[for="+i.attr("id")+"]").attr("style","color:red"),!0},rules:{intestatarioNome:{required:!0},intestatarioCognome:{required:!0},contattoTelefono:{number:!0,required:!0},contattoEmail:{email:!0,required:!0},informativaPrivacy:{required:!0}},messages:{contattoTelefono:{number:aLang.number},contattoEmail:{email:aLang.verifyemail}}}),$(a).on("focusout",".bootstrap-select",function(){"border: 1px solid red;"==$(this).parent().find("button").attr("style")&&$(this).find("select").valid()&&($(this).parent().find("button").css("border","1px solid #ccc"),$(this).parent().find("button").parent().parent().parent().find("label").css("color","#5a5a5c"))}),$(a).on("change","input",function(){var i=$(this).attr("id");"intestatarioNome"==i||"intestatarioCognome"==i?$(this).valid()&&($("#intestatarioNome").removeClass("error"),$("#intestatarioCognome").removeClass("error")):"contattoTelefono"!=i&&"fc_email"!=i||$(this).valid()&&($("#contattoTelefono").removeClass("error"),$("#contattoEmail").removeClass("error")),"color:red"==$("label[for="+i+"]").attr("style")&&($(this).valid()?($(this).css("border","1px solid #ccc"),$(this).parent().parent().find("label").css("color","#5a5a5c"),$(a+" #email-error").length>0&&$(a+" #email-error").remove()):($(this).css("border","2px solid red"),$(this).parent().parent().find("label").css("color","red")))})}function setEtichettaPulsantePiuFiltri(a){a.hasClass("aperto")?a.html(aLang.riduciFiltri+' &nbsp;<i class="fa fa-angle-up"></i>'):a.html(aLang.piuFiltri+' &nbsp;<i class="fa fa-angle-down"></i>')}function eseguiRicerca(a){$.ajax({type:"post",url:baseUrlLingua+"ajax/ricercaImmobiliParametri",dataType:"html",data:a,success:function(a){""==a?$(".immobiliListaAnnunci").html("nulla!!"):$(".immobiliListaAnnunci").html(a)}})}function salvaRicercaRecente(a){0!=utenteLogin&&$.ajax({type:"post",url:baseUrlLingua+"ajax/salvaRicercaRecente",data:a,success:function(a){}})}function setPercentualeProfilo(a){var i=$("#completa-profilo-widget");i.circliful({animationStep:5,foregroundColor:"#00984b",foregroundBorderWidth:5,backgroundBorderWidth:15,percent:a,icon:"f007",iconSize:50,iconPosition:"middle"}),100==a&&i.closest(".sidebar-listato").addClass("completato")}function getPercentualeProfilo(){$.ajax({url:baseUrlLingua+areaPrivataUrl+"/calcolaPercentualeProfilo",success:function(a){setPercentualeProfilo(a)}})}function initialize(){if($("#myModal").on("shown.bs.modal",function(){$("#myInput").focus()}),$("#myCarousel").on("slide.bs.carousel",function(){}),$("#cookie").length&&(cookieControl=0,$(".accept-cookie").click(function(){0==cookieControl&&($.post("/ajax/setCookie"),$("#cookie").hide()),cookieControl=1})),$("#").length>0&&validateForm("#form_contatti"),$("#formModificaProfilo").length>0&&validateFormProfilo("#formModificaProfilo"),$("#form_contatti").on("click","#inviaFormContatti",function(){var a=$("#form_contatti").find(".loader");if($("#form_contatti").valid()){a.stop().fadeIn(300),$(this).prop("disabled",!0);var i=new FormData($("#form_contatti")[0]);void 0!=$("#caricaCV").val()&&i.append("caricaCV",$("input[type=file][id='caricaCV']")[0].files[0]),$.ajax({type:"POST",url:"/ajax/setManifestazione/",data:i,cache:!1,mimeType:"multipart/form-data",contentType:!1,processData:!1,success:function(i){a.stop().fadeOut(300);var t=i.split("|"),e=t[1],o=$("input[name=lang]").val();if("OK"==e)if("es"==o){var n=t[0];location.href=$("#inviaForm").attr("data-conferma")+"/"+n+"/cmc?form=cs"}else{var r=$("#infoNascondi .immobilePrezzo").text()||$("#formContattiDestra .immobilePrezzo").text();r=r.replace(/[^0-9]/g,""),location.href=$("#inviaForm").attr("data-conferma")+"?form=cs&idimmobile="+$("#idImmobile").val()+"&prezzo="+r}}})}}),$("#form_contattiValuta").length>0&&(validateForm("#form_contattiValuta"),loadScriptMapValutazione(urlScriptDefault,API_KEY),$("#form_contattiValuta").on("change","input[name=settore]",function(){var a="idTip="+$("input[name=settore]:checked").val();$.ajax({type:"POST",url:"/ajax/getTipologieSettore",data:a,cache:!1,success:function(a){$("#contAmbitoChange").html(a),$("#labelfc_tipologia").selectpicker("refresh")}})})),$("#form_contattiValuta").on("click","#inviaFormContatti",function(){if($("#form_contattiValuta").valid()){$(this).prop("disabled",!0);var a=$("#form_contattiValuta").serialize();$.ajax({type:"POST",url:"/ajax/invia-valutazione/",data:a,cache:!1,success:function(a){var i=$.parseJSON(a).response;201==i.status_code&&(location.href=$("#inviaForm").attr("data-conferma")+"/"+i.id+"/cmc?form=vi")}})}}),$(document).on("change","input[type='file']",function(){var a=$(this).val(),i=a.lastIndexOf("."),t=a.length,e=a.substring(i+1,t),o=($(this).attr("id"),$(this)[0].files[0].size),n=Math.round(parseInt(o)/1024);n>5e3?(alert("File troppo grande "+n+"kb! Caricare un altro file con dimensione minore di 5000 kb.",{modal:!0}),$(this).val("")):"pdf"!=e&&"doc"!=e&&"docx"!=e&&(alert("Formato file non supportato! Caricare il file in pdf o doc.",{modal:!0}),$(this).val(""))}),$("#formContattiLavoraConNoi").length>0&&validateFormLavoraConNoi("#formContattiLavoraConNoi"),$("#formContattiLavoraConNoi").on("click","#inviaFormContatti",function(){if($("#formContattiLavoraConNoi").valid()){$(this).prop("disabled",!0);var a=new FormData($("#formContattiLavoraConNoi")[0]);void 0!=$("#caricaCV").val()&&a.append("caricaCV",$("input[type=file][id='caricaCV']")[0].files[0]),$.ajax({type:"POST",url:"/ajax/setManifestazione/",data:a,cache:!1,mimeType:"multipart/form-data",contentType:!1,processData:!1,success:function(a){var i=a.split("|")[1];$("input[name=lang]").val();"OK"==i&&(location.href=$("#inviaForm").attr("data-conferma")+"?form=cv")}})}}),void 0!=$("#prezzoAffitto").attr("name")&&sliderInput("#prezzoAffitto"),void 0!=$("#prezzoVendita").attr("name")&&sliderInput("#prezzoVendita"),void 0!=$("#superficieVendita").attr("name")&&sliderInput("#superficieVendita"),void 0!=$("#superficieAffitto").attr("name")&&sliderInput("#superficieAffitto"),$('a[data-toggle="tab"]').on("shown.bs.tab",function(a){void 0!=$("#prezzoAffitto").attr("name")&&sliderInput("#prezzoAffitto"),void 0!=$("#prezzoVendita").attr("name")&&sliderInput("#prezzoVendita"),void 0!=$("#superficieVendita").attr("name")&&sliderInput("#superficieVendita"),void 0!=$("#superficieAffitto").attr("name")&&sliderInput("#superficieAffitto")}),$("#formContattiCercoCasa").length>0&&validateFormCercoCasa("#formContattiCercoCasa"),$("#formContattiCercoCasa").on("click","#inviaFormContatti",function(){if($("#formContattiCercoCasa").valid()){$(this).prop("disabled",!0);var a=new FormData($("#formContattiCercoCasa")[0]);$.ajax({type:"POST",url:"/ajax/setManifestazione/",data:a,cache:!1,mimeType:"multipart/form-data",contentType:!1,processData:!1,success:function(a){var i=a.split("|"),t=i[1];i[0],$("input[name=lang]").val();"OK"==t&&(location.href=$("#inviaForm").attr("data-conferma")+"?form=cs")}})}}),$(".formGenerico").on("change","#labelfc_selectFormHome",function(){var a=$(this).val();"contattoSemplice"==a?location.href="/contatti":"cercoCasa"==a?location.href="/contatti#cercoCasa":"vendoCasa"==a?location.href="/valuta-il-tuo-immobile":"invioCV"==a&&(location.href="/chi-siamo")}),$("#formAggiornaManifestazine").on("click","#aggiornaManifestazione",function(){var a=$("#formAggiornaManifestazine").serialize();$.ajax({type:"POST",url:"/ajax/aggiornaInformativa/",data:a,cache:!1,success:function(a){"ko"!=a&&$("#contattiConferma .containerForm").html(a)}})}),$('[data-toggle="tooltip"]').tooltip(),$(".container.scheda").length>0){var a=$(".formContattiImmobile input[name=idImmobile]").val(),i=$(".formContattiImmobile input[name=idAgenzia]").val(),t=new Date,e=(t.getDate()<10?"0":"")+t.getDate()+"/"+(t.getMonth()<10?"0":"")+(t.getMonth()+1)+"/"+t.getFullYear()+" "+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds();if(void 0!=$.cookie("ultimi_imm_visti_"+i))var o=JSON.parse($.cookie("ultimi_imm_visti_"+i));else o={immobili:[],cantieri:[]};var n=a.split("-"),r=n[n.length-1];if("IDC"==n[0]){o.cantieri=$.grep(o.cantieri,function(a,i){return o.cantieri[i].id==r&&(o.cantieri[i].data=e),o.cantieri[i].id!=r});var c=$.map(o.cantieri,function(a,i){return i}).length;o.cantieri[c]={id:r,data:e}}else{o.immobili=$.grep(o.immobili,function(a,i){return o.immobili[i].id==r&&(o.immobili[i].data=e),o.immobili[i].id!=r});c=$.map(o.immobili,function(a,i){return i}).length;o.immobili[c]={id:r,data:e}}}if($(".myModal").on("shown.bs.modal",function(){var a=$(this).attr("id");validateForm("#"+a+" #form_contattiImmobile"),$(".immobiliListaAnnunci, .cantieriLista").on("click","#"+a+" #form_contattiImmobile .inviaFormContatti",function(){if($("#"+a+" #form_contattiImmobile").valid()){$(this).prop("disabled",!0);var i=$("#"+a+" #form_contattiImmobile").serialize();$.ajax({type:"POST",url:"/ajax/invia-manifestazione-specifica/",data:i,cache:!1,success:function(a){var i=$.parseJSON(a).response;201==i.status_code&&(location.href=$("#inviaForm").attr("data-conferma")+"/"+i.id+"/cmc?form=cs")}})}})}),$(".scheda #form_contattiImmobile").length>0&&(validateForm("#form_contattiImmobile"),$("#form_contattiImmobile").on("click","#inviaFormContatti",function(){if($("#form_contattiImmobile").valid()){$("#form_contattiImmobile").find(".loader").stop().fadeIn(300),$(this).prop("disabled",!0);var a=$("#form_contattiImmobile").serialize();$.ajax({type:"POST",url:"/ajax/invia-manifestazione-specifica/",data:a,cache:!1,success:function(a){var i=$.parseJSON(a).response;201==i.status_code&&(location.href=$("#inviaForm").attr("data-conferma")+"/"+i.id+"/cmc?form=cs")}})}})),($("#form_contattiImmobileModal").length||$("#GoToForm").length)&&$("#form_contattiImmobileModal").on("click","#inviaFormContatti",function(){if(validateForm("#form_contattiImmobileModal"),$("#form_contattiImmobileModal").valid()){$(this).prop("disabled",!0);var a=$("#form_contattiImmobileModal").serialize();$.ajax({type:"POST",url:"/ajax/invia-manifestazione-specifica/",data:a,cache:!1,success:function(a){var i=$.parseJSON(a).response;201==i.status_code&&(location.href=$("#inviaFormModale").attr("data-conferma")+"/"+i.id+"/cmc?form=cs")}})}}),$("#form_contattiImmobileInviaAmico").length>0&&($("#form_contattiImmobileInviaAmico").on("click","#inviaFormContatti",function(){validateForm("#form_contattiImmobileInviaAmico"),$("#form_contattiImmobileInviaAmico").valid()&&($(this).prop("disabled",!0),$(this).attr("disabled",!0),$.ajax({type:"POST",url:"/ajax/captchaCheck",data:{captcha:$("#form_contattiImmobileInviaAmico [name=captcha]").val()},success:function(a){if(0==a)return $("#form_contattiImmobileInviaAmico [name=captcha]").removeClass("valid"),$("#form_contattiImmobileInviaAmico [name=captcha]").addClass("error"),$("#form_contattiImmobileInviaAmico #inviaFormContatti").attr("disabled",!1),!1;var i=$("#form_contattiImmobileInviaAmico").serializeArray();i.push({name:"URLRicerca",value:$(".breadcrumb a").last().attr("href")}),$.ajax({type:"POST",url:"/ajax/sendToFriend/",data:i,cache:!1,success:function(a){"true"!=a?$(".fullRed").show():($(".formContattiInviaAmicoClass").hide(),$(".fullGreen").show())}})}}))}),$("#formContattiInviaAmico").on("hidden.bs.modal",function(){$(".fullRed").hide(),$(".fullGreen").hide(),$(".formContattiInviaAmicoClass").show(),$("#form_contattiImmobileInviaAmico")[0].reset(),nameToReplace="#Name",$("#form_contattiImmobileInviaAmico #inviaFormContatti").prop("disabled",!1)})),$(".footerContatti #form_contattiImmobileFooter").length>0&&$("#form_contattiImmobileFooter").on("click","#inviaFormContattiFooter",function(){var a=$("#form_contattiImmobileFooter");if(validateForm("#form_contattiImmobileFooter"),$("#form_contattiImmobileFooter").valid()){a.find(".loader").stop().fadeIn(300),$(this).prop("disabled",!0);var i=a.serialize();$.ajax({type:"POST",url:"/ajax/invia-manifestazione-specifica/",data:i,cache:!1,success:function(a){var i=$.parseJSON(a).response;201==i.status_code&&(location.href=$("#inviaForm").attr("data-conferma")+"/"+i.id+"/cmc?form=cs")}})}}),$("#myModalDettaglio").on("shown.bs.modal",function(){validateForm("#myModalDettaglio #form_contattiImmobile"),$("#myModalDettaglio").on("click","#inviaFormContatti",function(){if($("#myModalDettaglio #form_contattiImmobile").valid()){$(this).prop("disabled",!0);var a=$("#myModalDettaglio #form_contattiImmobile").serialize();$.ajax({type:"POST",url:"/ajax/invia-manifestazione-specifica/",data:a,cache:!1,success:function(a){if(201==$.parseJSON(a).response.status_code){var i=aDati[0];location.href=$("#inviaForm").attr("data-conferma")+"/"+i+"/cmc?form=cs"}}})}})}),$("#myModalDettaglio").on("hide.bs.modal",function(){var a=$(".formContattiImmobile input[name=idImmobile]").val();$.cookie("setModalDettaglio_"+i+"_"+a,1,{path:"/",expires:180})}),$("#form_richiestaConsulenza").length>0&&(validateFormRichiestaConsulenza("#form_richiestaConsulenza"),$(".calcoloMutuo").on("click","#inviaRichiestaConsulenza",function(a){var i=$(this).closest("form");i.valid()&&($(this).prop("disabled",!0),$(this).find("span").toggle(),$.ajax({type:"POST",url:"/ajax/invia-consulenza-mutuo",data:i.serialize(),cache:!1,complete:function(){$("#inviaRichiestaConsulenza span").toggle(),$("#inviaRichiestaConsulenza").prop("disabled",!1)},success:function(a){"undefined"!=typeof ga&&ga("send","pageview","/obiettivi/form/mutuo/compilato/"),i[0].reset(),i.find(".input-group input").trigger("change"),201==$.parseJSON(a).response.status_code?($("html, body").animate({scrollTop:$("#anagraficaRichiestaConsulenza").offset().top-100},500),$("#esitoRichiestaConsulenza").collapse("show"),$("#anagraficaRichiestaConsulenza").collapse("hide"),window.setTimeout(function(){$("#hideRichiestaConsulenza").trigger("click")},15e3)):alert("Richiesta non inviata!")},error:function(a){alert(a)}}))})),$(".map_point").length>0){var l,s=!0,m=[],d={zoom:16,zoomCtrl:!0,positionPanel:google.maps.ControlPosition.LEFT_TOP,scrollMap:!1,disableDbClickZoom:!0,dragMap:s},p=new $.MapsClass("map_point"),f=$(".map_point").attr("indirizzo"),u=$(".map_point").attr("lat"),h=$(".map_point").attr("long");$("#usa_mappa").click(function(){var a=$(".map_point").attr("data-cartimg");$("#usa_mappa").is(":checked")?($("#ico_mappa").attr("src","/web/"+a+"img/icone/ico-mappa-attiva.png"),$("#ico_mappa").attr("title","Blocca mappa"),s=!0):($("#ico_mappa").attr("src","/web/"+a+"img/icone/ico-mappa-disattiva.png"),$("#ico_mappa").attr("title","Sblocca mappa"),s=!1);var i={zoom:16,zoomCtrl:!0,positionPanel:google.maps.ControlPosition.LEFT_TOP,scrollMap:!1,disableDbClickZoom:!0,dragMap:s};google.maps.event.addDomListener(window,"load",p.initializePoint(m,u,h,f,i,l))}),$(".map-legenda input").click(function(){var a=positionMap.top;$(".overlayMapPoint").css("top",a),$(".overlayMapPoint").fadeIn("slow");var i=[];$(this).is(":checked")?(m.push($(this).val()),$.each(m,function(a,t){if(!1===$("input[name='"+t+"']").is(":checked")){i.push(t)}}),$.each(i,function(a,i){$.inArray(i,m)>-1&&m.splice($.inArray(i,m),1)})):m.splice($.inArray($(this).val(),m),1),l=$(this).val(),google.maps.event.addDomListener(window,"load",p.initializePoint(m,u,h,f,d,l))}),$("#containerInputSearch").on("keyup","#SearchTo",function(){$("#errorMessagge").text().length>0&&($("#errorMessagge").html(""),$("#containerInputSearch").css("bottom","382px"))}),$(document).on("click","#buttonSearchTo",function(){google.maps.event.addDomListener(window,"load",p.initializePoint(m,u,h,f,d,l))}),$(".map-legenda").on("click","div",function(){var a=$(".map_point").attr("data-cartimg"),i=$(this).find("label").attr("rel");1==$(this).find("input").is(":checked")?$(this).find("img").attr("src","/web/"+a+"img/icone/ico_"+i+".png"):$(this).find("img").attr("src","/web/"+a+"img/icone/ico_"+i+"_off.png")}),$(".map-legenda div input").click(function(a){a.stopPropagation()}),$.each($(".map-legenda div label"),function(){var a=$(this).attr("for");$(this).removeAttr("for"),$(this).attr("rel",a)}),$(".map-legenda div").bind("click",function(){$(this).find("input").trigger("click")})}if($("#inputMezzi").on("click","label",function(){if("checkbox"!=$(this).find("input").attr("type")){$.each($("label img"),function(){$(this).attr("src",$(this).attr("src").replace("_on.png","_off.png"))});$(this).find("img").attr("src");$(this).find("input").is(":checked")&&$(this).find("img").attr("src",$(this).find("img").attr("src").replace("_off.png","_on.png"))}}),$("#containerOLE").length>0){var v=$("#containerOLE").attr("data-stato");if("PRESENTE"==v){var g=$("#containerOLE").attr("data-ce"),b=$("#containerOLE").attr("data-e"),z=($("#containerOLE").attr("data-registro"),$("#containerOLE").attr("data-date"),g.split("-")),C=z[0],I=z[1],y=b.split("-"),w=y[0],x=y[1];""!=C&&$("#"+C+"_CE").html("<div class='row margin0'><div class='classeStriscia classeNero'>"+I+"</div><div class='col-md-1 classeAngoloNero'></div></div>"),""!=w&&$("#"+w+"_E").html("<div class='row margin0'><div class='classeStriscia classeNero'>"+x+"</div><div class='col-md-1 classeAngoloNero'></div></div>")}else"EXENTO"!=v&&"TRAMITACI"!=v||$("#imageOLE").addClass(v)}$(document).on("click","#ripristinaNascosto",function(){var a,i=$(this).attr("rel"),t=$(this).attr("sezione"),e=$("#countNascondi").attr("rel");a="imm"==t?"idImmobile="+i:"idCantiere="+i,$.ajax({type:"POST",async:!1,url:baseUrlLingua+areaPrivataUrl+"/ajax/ripristinaNascondi",data:a,success:function(a){if("ok"==a){var t=e-1;$("#countNascondi").html("( "+t+" )"),$("#countNascondi").attr("rel",t),$("#contRipr"+i).fadeOut("slow"),0==t&&($(".ContainerUltimiVisti").hide("slow"),$("<h4 style='text-align:center'>Nessuna immobile nascosto.</h4>").insertBefore(".ContainerUltimiVisti"))}}})}),$("#modalLogin").on("click","#ButtonCreaTuoAccount",function(a){a.preventDefault(),$("#modalLogin").length>0&&$("#modalLogin").modal("hide"),setTimeout(function(){$("#modalRegistrati").modal("show"),$("body").attr("style","overflow: hidden"),$("#modalRegistrati").css({"overflow-y":"auto"})},500)}),$(document).on("hidden.bs.modal","#modalRegistrati",function(){$("body").removeAttr("style")}),$(document).on("click",".nascondiCantNoLogato",function(a){var i=$(this).attr("rel");$("#idNascontiImm").val(""),$("#idNascontiCant").val(i),$("#modalLogin").modal("show")}),$(document).on("click",".nascondiImmNoLogato",function(a){var i=$(this).attr("rel");$("#idNascontiCant").val(""),$("#idNascontiImm").val(i),$("#modalLogin").modal("show")}),$("a[href='#Mappa']").on("shown.bs.tab",function(){0==$("#schedaMappa .gm-style").length&&loadScriptMapDettaglio()}),$(document).on("click",".setSessionContatti",function(a){$.cookie("setSessionContatti",1,{path:"/",expires:180})}),1==$.cookie("setSessionContatti")&&($.cookie("setSessionContatti",0,{path:"/",expires:180}),$("#form_contattiImmobileFooter")&&$("html, body").animate({scrollTop:$("#form_contattiImmobileFooter").offset().top},"slow")),$(document).on("click",".eliminaAnnuncioSalvato",function(a){a.preventDefault();var i,t=$(this).attr("rel");i=$(this).hasClass("cantiere")?"idCantiere="+t:"idImmobile="+t,$.ajax({type:"POST",async:!1,url:baseUrlLingua+areaPrivataUrl+"/ajax/eliminaListaDesideri",data:i,success:function(a){if("ok"==a){var i=$("#countSalvati").attr("rel");i>0?(i-=1,$("#countSalvati").attr("rel",i)):i=0,$(".immobiliDesideri[data-id="+t+"]").fadeOut("slow"),$("#countSalvati").html(i)}}})}),$("#divContattiSegnalazioni").on("shown.bs.modal",function(){validateForm("#divContattiSegnalazioni #formContattiSegnalazioni")}),$("#formContattiSegnalazioni").on("click","#inviaFormContatti",function(){if($("#formContattiSegnalazioni").valid()){$(this).prop("disabled",!0);var a=new FormData($("#formContattiSegnalazioni")[0]);$.ajax({type:"POST",url:"/ajax/salvasegnalazioni/",data:a,cache:!1,mimeType:"multipart/form-data",contentType:!1,processData:!1,success:function(a){$("#msgSegnalazioni").html(a),$("#msgSegnalazioni").show("slow"),setTimeout(function(){$("#formContattiSegnalazioni")[0].reset(),$("#formContattiSegnalazioni #inviaFormContatti").removeAttr("disabled"),$("#msgSegnalazioni").hide("slow")},3e3)}})}}),$("#print-pdf").on("click",function(){showOverlay(this)}),$("#contenitoreBoxRicerca").on("change","#ricercaProvincia",function(){var a=$("#contenitoreBoxRicerca #ricercaProvincia option:selected").val();$("#ricercaImmobili #ricercaTipo").val("provincia"),$.ajax({url:"/ajax/getcomuniattivi",type:"GET",data:{provincia:a}}).done(function(i){$("#contenitoreBoxRicerca #ricercaComune").html(i),$("#contenitoreBoxRicerca #ricercaComune").removeAttr("disabled"),$("#contenitoreBoxRicerca #ricercaComune").selectpicker("refresh"),$("#ricercaImmobili #ricercaInput").val(a),$("#ricercaImmobili #ricercaProvinciaId").val(a),$("#ricercaImmobili #ricercaValore").val(a),$("#ricercaImmobili #ricercaComuneId").val(""),$("#ricercaImmobili #ricercaLocalitaId").val(""),$("#contenitoreBoxRicerca #ricercaLocalita").html(""),$("#contenitoreBoxRicerca #ricercaLocalita").attr("disabled","disabled"),$("#contenitoreBoxRicerca #ricercaLocalita").selectpicker("refresh")})}),$("#contenitoreBoxRicerca").on("change","#ricercaComune",function(){var a=$("#contenitoreBoxRicerca #ricercaComune option:selected").val();""!=a?($("#ricercaImmobili #ricercaTipo").val("comune"),$.ajax({url:"/ajax/getlocalitaattive",type:"GET",data:{comune:a}}).done(function(i){$("#contenitoreBoxRicerca #ricercaLocalita").html(i),$("#contenitoreBoxRicerca #ricercaLocalita").removeAttr("disabled"),$("#contenitoreBoxRicerca #ricercaLocalita").selectpicker("refresh"),$("#ricercaImmobili #ricercaInput").val(a),$("#ricercaImmobili #ricercaComuneId").val(a),$("#ricercaImmobili #ricercaValore").val(a),$("#ricercaImmobili #ricercaLocalitaId").val("")})):($("#contenitoreBoxRicerca #ricercaLocalita").html(""),$("#contenitoreBoxRicerca #ricercaLocalita").attr("disabled","disabled"),$("#contenitoreBoxRicerca #ricercaLocalita").selectpicker("refresh"),$("#ricercaImmobili #ricercaTipo").val("provincia"),$("#ricercaImmobili #ricercaInput").val($("#ricercaImmobili #ricercaProvinciaId").val()),$("#ricercaImmobili #ricercaValore").val($("#ricercaImmobili #ricercaProvinciaId").val()),$("#ricercaImmobili #ricercaComuneId").val(""),$("#ricercaImmobili #ricercaLocalitaId").val(""))}),$("#contenitoreBoxRicerca").on("change","#ricercaLocalita",function(){var a=$("#contenitoreBoxRicerca #ricercaLocalita option:selected").val();""!=a?($("#ricercaImmobili #ricercaTipo").val("localita"),$("#ricercaImmobili #ricercaInput").val(a),$("#ricercaImmobili #ricercaValore").val(a),$("#ricercaImmobili #ricercaLocalitaId").val(a)):($("#ricercaImmobili #ricercaTipo").val("comune"),$("#ricercaImmobili #ricercaInput").val($("#ricercaImmobili #ricercaComuneId").val()),$("#ricercaImmobili #ricercaValore").val($("#ricercaImmobili #ricercaComuneId").val()),$("#ricercaImmobili #ricercaLocalitaId").val(""))})}function showOverlay(){$("#print-pdf").addClass("loadingPdf"),window.addEventListener("focus",hideOverlay,!1)}function hideOverlay(){window.removeEventListener("focus",hideOverlay,!1),$("#print-pdf").removeClass("loadingPdf")}var hash=window.location.hash;function getQueryString(a,i){i||(i=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)").exec(i);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function richiesteTemporaneeInviaForm(a,i){var t=[];$.each($("#"+a).validate().invalidElements().prevObject,function(a,i){var e={},o=$(i.element).attr("id"),n=i.message;e.IdInput=o,e.Message=n,t.push(e)}),t=JSON.stringify(t),0==$("#"+a).validate().invalidElements().prevObject.length&&(t=null);var e=$("#"+a).serialize()+"&aErrorValidate="+t+"&posizione="+i;$.ajax({type:"POST",url:"/ajax/setManrichiestatemp/",data:e,cache:!1,async:!0,success:function(a){}})}function espandiRichiestaConsulenza(){$("#showRichiestaConsulenza").parent().collapse("hide"),$("#hideRichiestaConsulenza").parent().collapse("show"),$("#anagraficaRichiestaConsulenza").collapse("show")}function bloccaModalSalvaRicerca(a){$("#salvaRicercaModal").modal("hide"),clearTimeout(a)}function addCaptcha(a,i,t,e){$.ajax({method:"POST",url:"/ajax/captchaGet",dataType:"json",data:{id:e},success:function(o){$(a).html($("<img>",{src:o.image,width:i,height:t})),$("input[name=captcha] ").attr("id-session",e)},fail:function(a){}})}hash&&"#_=_"==hash&&(window.location.hash=""),getQueryString("login-form")&&$("#modalLogin").modal("show"),getQueryString("fb-no-email")&&$("#modalLogin").modal("show").find("#errorLogin").html(aLang.facebookSenzaEmail).show(),$(document).ready(function(){if($("#refreshCaptcha").on("click",function(){addCaptcha(".captcha","150px","40px","")}),$("#sendToFriendButton").on("click",function(a){$("#formContattiInviaAmico").modal("show"),addCaptcha(".captcha","150px","40px","")}),$("#printButton").on("click",function(a){printImmobile()}),$("#GoToForm").length&&$("#GoToForm").on("click",function(){$("#formContattiModale").modal("show")}),$("#showRichiestaConsulenza").click(function(){espandiRichiestaConsulenza(),window.setTimeout(function(){$("html, body").animate({scrollTop:$("#anagraficaRichiestaConsulenza").offset().top-100},250)},100)}),$("#hideRichiestaConsulenza").click(function(){$(this).parent().collapse("hide"),$("#showRichiestaConsulenza").parent().collapse("show"),$("#anagraficaRichiestaConsulenza").collapse("hide"),$("#esitoRichiestaConsulenza").collapse("hide"),window.setTimeout(function(){$("html, body").animate({scrollTop:$("#form_richiestaConsulenza").offset().top-100},250)},100)}),"1"==aLang.condizioniGeneraliHide&&($(".informativaPrivacyContainer").hide(),$("#informativaPrivacy").attr("checked","checked")),$("#ricercaPrezzoMin, #ricercaPrezzoMax").on("keyup",function(){var a=$(this).val().replace(/\./g,"");$(this).val(number_format(parseInt(a),0,",",".")),0==$(this).val()&&$(this).val(null),$(this).trigger("change")}),$("#ricercaLocaliMin, #ricercaLocaliMax").on("change",function(){0==$(this).val()&&$(this).val(null)}),$("input[name=telefono]").keypress(function(a){var i=(a=a||window.event).which?a.which:a.keyCode?a.keyCode:a.charCode;if(40==i||41==i||45==i||47==i||92==i)return!1}),$(".toolTipFire").hover(function(){toolTipEle=$(this).attr("data-target"),$("div[rel="+toolTipEle+"]").removeClass("tooltipRibasso")},function(){toolTipEle=$(this).attr("data-target"),$("div[rel="+toolTipEle+"]").addClass("tooltipRibasso")}),($(".schedaAnnuncio").length||$(".schedaCantiere").length)&&setTimeout(function(){$("#visiteImmobile").fadeIn(1e3),$("#visiteImmobile .arrow").on("click",function(){$(this).children("i").hasClass("fa-chevron-left")?($("#visiteImmobile .leftText").animate({width:"54px",padding:0},500),$("#visiteImmobile .leftText label").css("display","none")):$("#visiteImmobile .leftText").animate({width:"200px"},500,function(){$(this).css({padding:"18px 15px 0px 55px"}),$(this).children("label").css("display","block")}),$(this).children("i").toggleClass("fa-chevron-right"),$(this).children("i").toggleClass("fa-chevron-left")})},2e3),($(".schedaAnnuncio").length||$(".schedaCantiere").length)&&setTimeout(function(){$("#manifestazioniImmobile").fadeIn(1e3),$("#manifestazioniImmobile .arrow").on("click",function(){$(this).children("i").hasClass("fa-chevron-left")?($("#manifestazioniImmobile .leftText").animate({width:"54px",padding:0},500),$("#manifestazioniImmobile .leftText label").css("display","none")):$("#manifestazioniImmobile .leftText").animate({width:"200px"},500,function(){$(this).css({padding:"18px 15px 0px 55px"}),$(this).children("label").css("display","block")}),$(this).children("i").toggleClass("fa-chevron-right"),$(this).children("i").toggleClass("fa-chevron-left")})},3e3),setTimeout(function(){$("#visiteImmobile").fadeOut("fast")},8e3),setTimeout(function(){$("#manifestazioniImmobile").fadeOut("fast"),$("#manifestazioniImmobile_Info").length&&($(".schedaAnnuncioDescrizione").css({"background-color":"#FFF"}),$("#manifestazioniImmobile_Info").css({display:"block"}),$("#manifestazioniImmobile_Info").animate({top:"30px"},"slow"),$(".descrizioneFire ").animate({top:"20px"},"slow",function(){$(".schedaAnnuncioDescrizione").css({"background-color":""})}))},9500),($(".schedaAnnuncio").length||$(".schedaCantiere").length)&&!isMobile){var a=!1,i=!1;formDestra=$("#formContattiDestra"),h_full=formDestra.height(),$(window).on("resize",function(){$("#formContattiDestra").css({width:""})}),setTimeout(function(){$("#visiteImmobile").length&&($("#manifestazioniImmobile").css("top",parseInt($("#visiteImmobile").css("top"))+$("#visiteImmobile").height()+20),$(window).on("resize",function(){$("#manifestazioniImmobile").css("top",parseInt($("#visiteImmobile").css("top"))+$("#visiteImmobile").height()+20)})),$("#manifestazioniImmobile").length&&($("#contattaAgenzia").css("top",parseInt($("#manifestazioniImmobile").css("top"))+$("#manifestazioniImmobile").height()+20),$(window).on("resize",function(){$("#contattaAgenzia").css("top",parseInt($("#manifestazioniImmobile").css("top"))+$("#manifestazioniImmobile").height()+20)})),agenziaExplode=!0,$("#contattaAgenzia").fadeIn(1e3),$("#contattaAgenzia .arrow").on("click",function(){$(this).children("i").hasClass("fa-chevron-left")?($("#contattaAgenzia .leftText").animate({width:"0px",padding:0},500),$("#contattaAgenzia .leftText label").css("display","none")):$("#contattaAgenzia .leftText").animate({width:"145px"},500,function(){$(this).css({padding:"13px 15px 0 4px"}),$(this).children("label").css("display","block")}),$(this).children("i").toggleClass("fa-chevron-right"),$(this).children("i").toggleClass("fa-chevron-left")}),$("#contattaAgenzia .contattaAgenziaContainer, #contattaAgenzia .leftText").on("click",function(){$("#formContattiModale").modal("show"),$("#contattaAgenzia .arrow").children("i").hasClass("fa-chevron-left")&&$("#contattaAgenzia .arrow").trigger("click")})},4e3),$(document).on("scroll",function(){$(document).scrollTop()>h_full&&$(window).scrollTop()+$(window).height()<$("#inviaFormContattiFooter").offset().top?a?$(window).scrollTop()+$(window).height()>$("#inviaFormContattiFooter").offset().top?i||(i=!0,$("#formContattiDestra").fadeOut("300")):i&&(i=!1,$("#formContattiDestra").fadeIn("200")):(a=!0,h_full,$(window).height(),h=formDestra.children(".affiliato").outerHeight(!0)+formDestra.children(".immobilePrezzoBox").outerHeight(!0)+formDestra.children(".immobileDettagliBox").outerHeight(!0)+80,formDestra.children(".formContattiImmobile").hide(),formDestra.children(".affiliato").append('<div class="col-md-12 col-xs-12" style="padding-top:15px"><button type="button" id="GoToForm" class="btn btn-rete">'+$("#inviaFormContatti").text()+"</button></div>"),$("#GoToForm").on("click",function(){$("#formContattiModale").modal("show")}),formDestra.css({position:"fixed",width:formDestra.width(),height:h,top:$("#navbar").height(),left:formDestra.position().left}),$("#toolTip").show(),$("#toolTip").css({top:"auto","margin-left":"auto",position:"relative"}),$("#toolTip div").css({position:"initial",padding:"2px 0"}),$("#toolTip p").css({"text-align":"center"})):a&&($("#toolTip").removeProp("style"),$("#toolTip div").removeProp("style"),formDestra.css({position:"relative",top:"auto",left:"auto",height:h_full}),$("#GoToForm").length&&($("#formContattiDestra .formContattiImmobile").show(),$("#GoToForm").off("click"),$("#GoToForm").parent().remove()),a=!1)})}if(initialize(),"#cercoCasa"===location.hash&&0!=$("#labelfc_selectForm").length){$("#labelfc_selectForm option[value='cercoCasa']").prop("selected",!0);$.ajax({type:"POST",url:"/src/App/default/controllers/ajax/getForm.php",data:"sSezioneForm=cercoCasa",cache:!1,success:function(a){$("#schedaContatto").html(a),initialize()}}).done(function(){$.each($("select"),function(){$(this).selectpicker("refresh")})})}$("#contatti").on("change","#labelfc_selectForm",function(){var a="sSezioneForm="+$(this).val();$.ajax({type:"POST",url:"/src/App/default/controllers/ajax/getForm.php",data:a,cache:!1,success:function(a){$("#schedaContatto").html(a),initialize()}}).done(function(){$.each($("select"),function(){$(this).selectpicker("refresh")})})});var t=$("[data-toggle=collapse-side]"),e="."+t.attr("data-target"),o="."+t.attr("data-target-2");if(t.click(function(a){$(e).toggleClass("in"),$(o).toggleClass("out")}),$.each($(".caret"),function(){$(this).attr("class","fa fa-angle-down")}),$("#annunciUltimiSlider, #strutturaSocietariaSlider").length>0&&$("#annunciUltimiSlider, #strutturaSocietariaSlider").lightSlider({item:6,loop:!1,pager:!1,responsive:[{breakpoint:800,settings:{item:3}},{breakpoint:480,settings:{item:2}}]}),$(".checkbox-iscrizione-newsletter").change(function(){var a=$(this),i=a.val();$.ajax({url:baseUrlLingua+areaPrivataUrl+"/newsletter/iscrizione",method:"post",data:{iscrivi:a.is(":checked"),newsletter:i}}).success(function(a){})}),$(".iscrizione-gruppo").click(function(){var a=$(this),i=a.data("iscrivi"),t=a.data("gruppo");checkboxes=a.closest(".panel").find("input[type=checkbox]"),1==i?checkboxes.prop("checked",!0):checkboxes.removeProp("checked"),$.ajax({url:baseUrlLingua+areaPrivataUrl+"/newsletter/iscrizione-gruppo",method:"post",data:{iscrivi:i,gruppoNewsletter:t}}).success(function(a){})}),$("#formContattiCercoCasa").on("change","input[name=settore]",function(){var a="idTip="+$("input[name=settore]:checked").val();$.ajax({type:"POST",url:"/ajax/getTipologieSettore",data:a,cache:!1,success:function(a){$("#contAmbitoChange").html(a),$("#labelfc_tipologia").selectpicker("refresh")}})}),$("select#provincia").change(function(){var a=$(this).val();$.ajax({url:baseUrlLingua+areaPrivataUrl+"/profilo/carica-comuni",method:"post",dataType:"json",data:{provincia:a}}).success(function(a){var i=$("select#citta");i.find("option").first().text(aLang.scegliComune),i.find("option").slice(1).remove(),$.each(a,function(a,t){i.append('<option value="'+t.comuneId+'">'+t.comuneNome+"</option>")})})}),$(".visualizza-password").click(function(){var a=$(this),i=a.siblings("input"),t=i.attr("type"),e=a.children("i.fa");i.attr("type","password"==t?"text":"password"),e.toggleClass("fa-eye").toggleClass("fa-eye-slash")}),$("#ButtonAggiornaProfilo").click(function(){var a=$(this).closest("form");$("#formModificaProfilo").valid()&&$.ajax({url:baseUrlLingua+areaPrivataUrl+"/ajax/salvaModificaProfilo/",method:"post",data:a.serialize(),dataType:"json"}).success(function(a){200==a.response.status_code?$(".alert").addClass("alert-success").removeClass("alert-danger").text(aLang.alertProfiloAggiornato):$(".alert").removeClass("alert-success").addClass("alert-danger").text(a.response.message),$("#alertProfiloAggiornato").modal("show"),setTimeout(function(){$("#alertProfiloAggiornato").modal("hide")},2e3)})}),!checkCookie("alertComparso")&&"es"!=nazione){var n=setTimeout(function(){$("#salvaRicercaModal").modal("show")},2e4);$("#contentRiepilogo p").hide()}$("#salvaRicercaModal").on("hidden.bs.modal",function(){alertSalva&&$("#alertSalva").fadeIn(500)}),$("#salvaRicerca").on("click",function(){alertSalva=!1}),$("#alertSalva").on("click",function(){alertSalva=!0,$("#salvaRicercaModal").modal("show")}),$("#contentRiepilogo p").hide(),$("#modalRegistrati, #modalLogin").on("shown.bs.modal",function(){bloccaModalSalvaRicerca(n)}),$("#boxSearchArea").on("shown",function(){bloccaModalSalvaRicerca(n)});var r=$("#ricercaInput").attr("tipoRicerca");if("localita"==sRicercaModalita||"Cantieri"==r){var c=$("#ricercaTipo").val(),l=$("#ricercaNazione").val(),s=$("#ricercaKeyUrl").val(),m=$("#ricercaValore").val(),d=$("#ricercaTesto").val(),p=$("#ricercaCategoria").val(),f=$("#ricercaStringa").val(),u=$("#ricercaInput").val(),v=0;$("#ricercaInput").autocomplete({autoFocus:!0,minLength:3,source:function(a,i){var t=$("#ricercaInput").val().replace("","'");$.ajax({type:"post",url:baseUrlLingua+"ajax/ricerca"+r+"Autocomplete",dataType:"json",data:{ricercaTesto:t,ricercaCategoria:$("#ricercaCategoria").val(),ricercaContratto:$("#ricercaContratto").val()},success:function(a){if(a.length)i(a.slice(0,50));else{var t=[{label:$("#"+r.toLowerCase()+"NoResult").attr("msg"),value:i.term}];i(t)}}}),$(".imgImmobiliRicercaWait").css("display","block")},response:function(a,i){$(".imgImmobiliRicercaWait").hide()},close:function(a,i){1!=v?($("#ricercaTipo").val(c),$("#ricercaNazione").val(l),$("#ricercaKeyUrl").val(s),$("#ricercaValore").val(m),$("#ricercaTesto").val(d),$("#ricercaStringa").val(f),0==$("#ricercaInput").is(":focus")&&$("#ricercaInput").val(u),"Agenzie"==r&&$("#ricercaCategoria").val(p),v=0):($("#ricercaTipo").val(valRicercaTipo),$("#ricercaNazione").val(valRicercaNazione),$("#ricercaKeyUrl").val(valRicercaKeyUrl),$("#ricercaValore").val(valRicercaValore),$("#ricercaTesto").val(valRicercaTesto),$("#ricercaStringa").val(valRicercaStringa),0==$("#ricercaInput").is(":focus")&&$("#ricercaInput").val(u),"Agenzie"==r&&$("#ricercaCategoria").val(valRicercaCategoria))},select:function(a,i){if(void 0===i.item.data)return!1;aData=i.item.data.split("|"),$("#ricercaTipo").val(aData[0]),$("#ricercaNazione").val(aData[1]),$("#ricercaKeyUrl").val(aData[2]),$("#ricercaValore").val(aData[3]),$("#ricercaTesto").val(i.item.label),$("#ricercaStringa").val(i.item.data),$("#ricercaInput").val(i.item.label),"Agenzie"==r&&$("#ricercaCategoria").val(aData[4]),v=1,valRicercaTipo=aData[0],valRicercaNazione=aData[1],valRicercaKeyUrl=aData[2],valRicercaValore=aData[3],valRicercaTesto=i.item.label,valRicercaStringa=i.item.data,valRicercaInput=i.item.label,"Agenzie"==r&&(valRicercaCategoria=aData[4]),0==$(".immobilifiltroRicerca").length&&($("#ricercaButton").unbind("click"),$("#ricerca"+r).submit())},open:function(a,i){navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&$(".ui-autocomplete").off("menufocus")},focus:function(a,i){return!1}}).autocomplete("instance")._renderItem=function(a,i){return $("<li>").append("<div class='ricercaLabel'>"+i.label+"</div><div class='ricercaDesc'>"+i.desc+"</div>").appendTo(a)},$(".listaRicercaInvio").on("keyup keypress keydown touchend",function(a){13===a.keyCode&&""!=$("#ricercaValore").val()&&($("#ricercaButton").unbind("click"),$("#ricerca"+r).submit())}),$(this).trigger("change"),$("#ricercaButton").on("click",function(){controlloPulsante=1,""!==$("#ricercaValore").val()&&(""==$("#ricercaInput").val()?($("#ricercaTipo").val(c),$("#ricercaNazione").val(l),$("#ricercaKeyUrl").val(s),$("#ricercaValore").val(m),$("#ricercaTesto").val(d),$("#ricercaStringa").val(f),$("#ricercaInput").val(u),"Agenzie"==r&&$("#ricercaCategoria").val(p)):$("#ricercaInput").val($("#ricercaTesto").val()),$("#ricercaButton").unbind("click"),$("#ricerca"+r).submit())}),$("input.listaImmobiliAjax, select.listaImmobiliAjax").on("change",function(){var a=$("#ricercaImmobili").serialize();console.log(a),$(".immobiliListaAnnunciCaricamento").show(),eseguiRicerca(a)}),$("#ricercaImmobili").submit(function(){$("#ricercaButton").unbind("click"),salvaRicercaRecente($(this).serialize())})}0!=utenteLogin&&setPercentualeProfilo(percentualeProfilo),$("#ButtonRegistrati").click(function(){$("#modalRegistrati").modal("show")}),setEtichettaPulsantePiuFiltri($(".piuFiltri")),$(".piuFiltri").click(function(){var a=$(this);a.toggleClass("aperto"),setEtichettaPulsantePiuFiltri(a)}),$("#salvaRicercaModal").on("shown.bs.modal",function(){$("#alertSalva").fadeOut(100),setCookie("alertComparso",!0,1);var a=$(this),i="lat="+a.find("input[name=lat]").val()+"&lng="+a.find("input[name=lng]").val()+"&raggio="+a.find("input[name=raggio]").val();"mappa"==a.find('input[name="ricercaTipo"]').val()&&$.ajax({type:"post",url:baseUrlLingua+"ajax/getImgMappa",data:i,success:function(i){a.find("#anteprimaMappa").attr("src",i)}})}),$(".visualizzaTelefono").click(function(a){nTelefono=$(this).attr("tel"),nAnnuncioId=$(this).attr("annuncio"),sTipo=$(this).attr("tipo"),sAgenzia=$(this).attr("agenzia"),nUtente=$(this).attr("utente"),$(".visualizzaTelefono").each(function(){$(this).html($(this).attr("tel")),$(this).removeClass("link"),$(this).unbind("click")}),$.post(baseUrlLingua+"ajax/salvaVisualizzaNumero",{tipo:sTipo,annuncioId:nAnnuncioId,agenzia:sAgenzia,utente:nUtente},function(a,i,t){})}),$(".bfh-selectbox").on("change.bfhselectbox",function(){var a=$(this).val();sUrl=$("link[hreflang='"+a+"']").attr("href"),""!=sUrl&&(location.href=sUrl)}),$(document).on("shown.bs.modal","#containerOLE",function(){$(".modal-backdrop").remove()}),$(".rinnova-alert").on("click",function(a){a.preventDefault(),idSalvaRicerca=$(this).data("ricerca"),$.ajax({url:"/ajax/rinnovaAlert",data:{idSalvaRicerca:idSalvaRicerca},success:function(a){location.reload()}})}),$(".schedaAnnuncioGalleriaImmagini a").not("[href=#Mappa]").on("click",function(){$("body").removeClass("mappa-attiva")}),$(".schedaAnnuncioGalleriaImmagini a[href=#Mappa]").on("click",function(){$("body").addClass("mappa-attiva")}),$(".containerFiltra").on("click",".js-open-filter",function(){$("<div id='containerFiltraTitolo'>"+aLang.modificaRicerca+" <span id='chiudimodificaFiltra' class='img-close'></span></div>").insertBefore(".immobilifiltroRicerca"),$("#containerRicercaJS").attr("style","display:block!important;position: fixed;position: -ms-device-fixed;top: 0;right: 0;z-index: 1050;width: 100%;height: 100%;background: #fff;display: none;-webkit-animation: open-up .2s;animation: open-up .2s;-webkit-animation-fill-mode: forwards;animation-fill-mode: forwards;;")}),$("#containerRicercaJS").on("click","#chiudimodificaFiltra",function(){$("#containerRicercaJS").removeAttr("style"),$("#containerFiltraTitolo").remove()}),location.href.includes("#form_richiestaConsulenza")&&espandiRichiestaConsulenza()}),$('button[data-toggle="tooltip"]').tooltip({animated:"fade",html:!0});var tipoVecchio,titoloVecchio,sideslider=$("[data-toggle=collapse-side]"),sel=sideslider.attr("data-target"),sel2=sideslider.attr("data-target-2");function aggiornaSottotipologie(a){$.ajax({type:"POST",url:"/ajax/getSottotipologie",data:{sTipologiaId:a},cache:!1,success:function(a){var i=$.parseJSON(a),t=$("#labelfc_sottotipologia");t.html('<option id="sottotipologiaSeleziona" value="">Seleziona il dettaglio</option>'),$.each(i,function(a,i){t.append('<option value="'+i.immobileSottoTipologiaId+'">'+i.immobileSottoTipologia+"</option>")}),t.selectpicker("refresh")}})}sideslider.click(function(a){$(sel).toggleClass("in"),$(sel2).toggleClass("out")}),$("#btnCheNePensi").on("click",function(){$(this).fadeOut(100),tipoVecchio=$("#tipo").val(),$(".onlyChenepensi").show(),$(".onlyRichieste").hide(),$("#pageUrl").val(location.href),$("#divContattiSegnalazioni").modal("show"),$("#tipo").val("cheNePensi")}),$("#divContattiSegnalazioni").on("hidden.bs.modal",function(){$(".onlyChenepensi").hide(),$(".onlyRichieste").show(),$("#tipo").val(tipoVecchio),$("#btnCheNePensi").fadeIn(100)}),$("button.navbar-toggle").on("click",function(){window.location.pathname.split("/")[1];$(".icon-bar").toggleClass("hidden"),$(this).toggleClass("img-close")}),$(document).click(function(a){var i=$(a.target);!0!==$(".navbar-collapse").hasClass("navbar-collapse in")||i.hasClass("navbar-toggle")||$("button.navbar-toggle").click()}),$("#formContattiCercoCasa").on("change","#labelfc_tipologia",function(){aggiornaSottotipologie($(this).val())});